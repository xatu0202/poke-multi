<script>
  const kanaMap = {
    // ひらがな
    ぁ: "あ",
    ぃ: "い",
    ぅ: "う",
    ぇ: "え",
    ぉ: "お",
    が: "か",
    ぎ: "き",
    ぐ: "く",
    げ: "け",
    ご: "こ",
    ざ: "さ",
    じ: "し",
    ず: "す",
    ぜ: "せ",
    ぞ: "そ",
    だ: "た",
    ぢ: "ち",
    づ: "つ",
    で: "て",
    ど: "と",
    ば: "は",
    び: "ひ",
    ぶ: "ふ",
    べ: "へ",
    ぼ: "ほ",
    ぱ: "は",
    ぴ: "ひ",
    ぷ: "ふ",
    ぺ: "へ",
    ぽ: "ほ",
    ゔ: "う",
    ゕ: "か",
    ゖ: "け",
    っ: "つ",
    ゃ: "や",
    ゅ: "ゆ",
    ょ: "よ",

    // カタカナ
    ァ: "あ",
    ィ: "い",
    ゥ: "う",
    ェ: "え",
    ォ: "お",
    ガ: "か",
    ギ: "き",
    グ: "く",
    ゲ: "け",
    ゴ: "こ",
    ザ: "さ",
    ジ: "し",
    ズ: "す",
    ゼ: "せ",
    ゾ: "そ",
    ダ: "た",
    ヂ: "ち",
    ヅ: "つ",
    デ: "て",
    ド: "と",
    バ: "は",
    ビ: "ひ",
    ブ: "ふ",
    ベ: "へ",
    ボ: "ほ",
    パ: "は",
    ピ: "ひ",
    プ: "ふ",
    ペ: "へ",
    ポ: "ほ",
    ヴ: "う",
    ヵ: "か",
    ヶ: "け",
    ッ: "つ",
    ャ: "や",
    ュ: "ゆ",
    ョ: "よ",

    // カタカナ → ひらがな
    ア: "あ",
    イ: "い",
    ウ: "う",
    エ: "え",
    オ: "お",
    カ: "か",
    キ: "き",
    ク: "く",
    ケ: "け",
    コ: "こ",
    サ: "さ",
    シ: "し",
    ス: "す",
    セ: "せ",
    ソ: "そ",
    タ: "た",
    チ: "ち",
    ツ: "つ",
    テ: "て",
    ト: "と",
    ナ: "な",
    ニ: "に",
    ヌ: "ぬ",
    ネ: "ね",
    ノ: "の",
    ハ: "は",
    ヒ: "ひ",
    フ: "ふ",
    ヘ: "へ",
    ホ: "ほ",
    マ: "ま",
    ミ: "み",
    ム: "む",
    メ: "め",
    モ: "も",
    ヤ: "や",
    ユ: "ゆ",
    ヨ: "よ",
    ラ: "ら",
    リ: "り",
    ル: "る",
    レ: "れ",
    ロ: "ろ",
    ワ: "わ",
    ヲ: "を",
    ン: "ん",
  };

  const names = [
    "アオガラス",
    "アグノム",
    "アサナン",
    "アシマリ",
    "アシレーヌ",
    "アチゲータ",
    "アチャモ",
    "アップリュー",
    "アノクサ",
    "アノホラグサ",
    "アブリボン",
    "アブリー",
    "アマカジ",
    "アマージョ",
    "アメタマ",
    "アメモース",
    "アラブルタケ",
    "アリゲイツ",
    "アルクジラ",
    "アーボ",
    "アーボック",
    "イエッサン",
    "イキリンコ",
    "イシツブテ",
    "イッカネズミ",
    "イトマル",
    "イノムー",
    "イルカマン",
    "イルミーゼ",
    "イワンコ",
    "ウェルカモ",
    "ウェーニバル",
    "ウォーグル",
    "ウガツホムラ",
    "ウソッキー",
    "ウソハチ",
    "ウツドン",
    "ウネルミナモ",
    "ウパー",
    "ウミディグダ",
    "ウミトリオ",
    "ウリムー",
    "ウルガモス",
    "ウーラオス",
    "エアームド",
    "エイパム",
    "エテボース",
    "エビワラー",
    "エムリット",
    "エルフーン",
    "エルレイド",
    "エレキッド",
    "エレキブル",
    "エレズン",
    "エレブー",
    "エンテイ",
    "エンニュート",
    "エンブオー",
    "エンペルト",
    "エーフィ",
    "オコリザル",
    "オシャマリ",
    "オタチ",
    "オニゴーリ",
    "オニシズクモ",
    "オノンド",
    "オラチフ",
    "オリーニョ",
    "オリーヴァ",
    "オンバット",
    "オーガポン",
    "オーダイル",
    "オーロット",
    "オーロンゲ",
    "カイデン",
    "カイリュー",
    "カゲボウズ",
    "カジッチュ",
    "カチコール",
    "カヌチャン",
    "カバルドン",
    "カビゴン",
    "カプサイジ",
    "カポエラー",
    "カマスジョー",
    "カミッチュ",
    "カミツオロチ",
    "カメックス",
    "カメール",
    "カラナクシ",
    "カラマネロ",
    "カラミンゴ",
    "カルボウ",
    "ガチグマ",
    "ガバイト",
    "ガブリアス",
    "ガーディ",
    "キノガッサ",
    "キバゴ",
    "キマワリ",
    "キモリ",
    "キャモメ",
    "キュウコン",
    "キョジオーン",
    "キラフロル",
    "キラーメ",
    "キルリア",
    "キレイハナ",
    "キングドラ",
    "ギモー",
    "ギャラドス",
    "クエスパトラ",
    "クサイハナ",
    "クズモー",
    "クヌギダマ",
    "クマシュン",
    "クルマユ",
    "クレセリア",
    "クレッフィ",
    "クレベース",
    "クワガノン",
    "クワッス",
    "グライオン",
    "グライガー",
    "グラエナ",
    "グランブル",
    "グルトン",
    "グレイシア",
    "グレンアルマ",
    "ケイコウオ",
    "ケッキング",
    "ケロマツ",
    "ケンタロス",
    "ゲコガシラ",
    "ゲッコウガ",
    "ゲンガー",
    "コアルヒー",
    "コイキング",
    "コイル",
    "コオリッポ",
    "コジオ",
    "コジョフー",
    "コジョンド",
    "コダック",
    "コノハナ",
    "コノヨザル",
    "コバルオン",
    "コフキムシ",
    "コフーライ",
    "コマタナ",
    "コモルー",
    "コリンク",
    "コロトック",
    "コロボーシ",
    "コータス",
    "ゴウカザル",
    "ゴクリン",
    "ゴチミル",
    "ゴチム",
    "ゴビット",
    "ゴマゾウ",
    "ゴリランダー",
    "ゴルダック",
    "ゴルーグ",
    "ゴローニャ",
    "ゴローン",
    "ゴンベ",
    "ゴース",
    "ゴースト",
    "サイドン",
    "サイホーン",
    "サケブシッポ",
    "サシカマス",
    "サダイジャ",
    "サナギラス",
    "サボネア",
    "サマヨール",
    "サルノリ",
    "サワムラー",
    "サンダー",
    "サンダース",
    "サンド",
    "サーナイト",
    "ザングース",
    "シェルダー",
    "シガロコ",
    "シザリガー",
    "シズクモ",
    "シビルドン",
    "シャリタツ",
    "シャワーズ",
    "シャンデラ",
    "シロデスナ",
    "シードラ",
    "ジオヅム",
    "ジバコイル",
    "ジヘッド",
    "ジメレオン",
    "ジャノビー",
    "ジャラコ",
    "ジャランゴ",
    "ジャローダ",
    "ジュカイン",
    "ジュゴン",
    "ジュナイパー",
    "ジュプトル",
    "ジュペッタ",
    "ジュラルドン",
    "スイクン",
    "スカタンク",
    "スカンプー",
    "スコヴィラン",
    "ストライク",
    "ストリンダー",
    "スナノケガワ",
    "スナバァ",
    "スナヘビ",
    "スリープ",
    "スワンナ",
    "ズピカ",
    "ズルッグ",
    "セグレイブ",
    "セゴール",
    "セビエ",
    "ゼニガメ",
    "ゼブライカ",
    "ソウブレイズ",
    "ゾロア",
    "ゾロアーク",
    "タイレーツ",
    "タギングル",
    "タケルライコ",
    "タツベイ",
    "タテトプス",
    "タネボー",
    "タマンチュラ",
    "ダイケンキ",
    "ダイノーズ",
    "ダクマ",
    "ダグトリオ",
    "ダブラン",
    "ダンバル",
    "ダーテング",
    "チコリータ",
    "チャオブー",
    "チャデス",
    "チャーレム",
    "チュリネ",
    "チラーミィ",
    "チリーン",
    "チルタリス",
    "チルット",
    "ツタージャ",
    "ツンベアー",
    "テツノイサハ",
    "テツノイバラ",
    "テツノイワオ",
    "テツノカイナ",
    "テツノカシラ",
    "テツノコウベ",
    "テツノドクガ",
    "テツノブジン",
    "テツノワダチ",
    "テブリム",
    "テラキオン",
    "テラパゴス",
    "ディグダ",
    "ディンルー",
    "デカグース",
    "デカヌチャン",
    "デリバード",
    "デンチュラ",
    "デンヂムシ",
    "デンリュウ",
    "トリデプス",
    "トルネロス",
    "トロッゴン",
    "トロピウス",
    "ドオー",
    "ドガース",
    "ドジョッチ",
    "ドッコラー",
    "ドデカバシ",
    "ドラメシヤ",
    "ドリュウズ",
    "ドレディア",
    "ドロバンコ",
    "ドロンチ",
    "ドンカラス",
    "ドンメル",
    "ドータクン",
    "ドーブル",
    "ナエトル",
    "ナカヌチャン",
    "ナゾノクサ",
    "ナックラー",
    "ナッシー",
    "ナマケロ",
    "ナマズン",
    "ナミイルカ",
    "ニャイキング",
    "ニャオハ",
    "ニャスパー",
    "ニャヒート",
    "ニャビー",
    "ニャローテ",
    "ニャース",
    "ニューラ",
    "ニョロゾ",
    "ニョロトノ",
    "ニョロボン",
    "ニョロモ",
    "ニンフィア",
    "ヌオー",
    "ヌマクロー",
    "ヌメイル",
    "ヌメラ",
    "ヌメルゴン",
    "ネオラント",
    "ネッコアラ",
    "ノクタス",
    "ノコッチ",
    "ハカドッグ",
    "ハクリュー",
    "ハスブレロ",
    "ハスボー",
    "ハッサム",
    "ハネッコ",
    "ハピナス",
    "ハブネーク",
    "ハヤシガメ",
    "ハリテヤマ",
    "ハリボーグ",
    "ハリマロン",
    "ハリーセン",
    "ハリーマン",
    "ハルクジラ",
    "バクフーン",
    "バクーダ",
    "バサギリ",
    "バシャーモ",
    "バスラオ",
    "バチュル",
    "バチンウニ",
    "バチンキー",
    "バネブー",
    "バルキー",
    "バルジーナ",
    "バルチャイ",
    "バルビート",
    "バンギラス",
    "パオジアン",
    "パチリス",
    "パピモッチ",
    "パフュートン",
    "パモ",
    "パモット",
    "パルシェン",
    "パーモット",
    "ヒコザル",
    "ヒトカゲ",
    "ヒトモシ",
    "ヒドイデ",
    "ヒノアラシ",
    "ヒノヤコマ",
    "ヒバニー",
    "ヒメグマ",
    "ヒンバス",
    "ヒードラン",
    "ビブラーバ",
    "ビリジオン",
    "ビークイン",
    "ピィ",
    "ピカチュウ",
    "ピクシー",
    "ピチュー",
    "ピンプク",
    "ファイヤー",
    "フォッコ",
    "フォレトス",
    "フカマル",
    "フクスロー",
    "フシギソウ",
    "フシギダネ",
    "フシギバナ",
    "フタチマル",
    "フライゴン",
    "フラエッテ",
    "フラージェス",
    "フリージオ",
    "フローゼル",
    "フワライド",
    "フワンテ",
    "フーパ",
    "ブイゼル",
    "ブビィ",
    "ブラッキー",
    "ブリガロン",
    "ブリザポス",
    "ブリジュラス",
    "ブリムオン",
    "ブルー",
    "ブロスター",
    "ブーピッグ",
    "プクリン",
    "プラスル",
    "プリン",
    "ヘイガニ",
    "ヘイラッシャ",
    "ヘラクロス",
    "ヘルガー",
    "ベイリーフ",
    "ベラカス",
    "ベロバー",
    "ペリッパー",
    "ペルシアン",
    "ホゲータ",
    "ホシガリス",
    "ボクレー",
    "ボチ",
    "ボルトロス",
    "ボーマンダ",
    "ポカブ",
    "ポチエナ",
    "ポッタイシ",
    "ポッチャマ",
    "ポットデス",
    "ポリゴン",
    "ポリゴン2",
    "ポリゴンZ",
    "マイナン",
    "マクノシタ",
    "マグカルゴ",
    "マケンカニ",
    "マスカーニャ",
    "マタドガス",
    "マダツボミ",
    "マニューラ",
    "マフォクシー",
    "マホイップ",
    "マホミル",
    "マメバッタ",
    "マリル",
    "マルノーム",
    "マンキー",
    "マンムー",
    "ミカルゲ",
    "ミガルーサ",
    "ミジュマル",
    "ミズゴロウ",
    "ミツハニー",
    "ミニリュウ",
    "ミニーブ",
    "ミブリム",
    "ムウマ",
    "ムウマージ",
    "ムクバード",
    "ムックル",
    "メェークル",
    "メガニウム",
    "メガヤンマ",
    "メグロコ",
    "メタグロス",
    "メタモン",
    "メタング",
    "メッソン",
    "メテノ",
    "メノクラゲ",
    "メブキジカ",
    "メラルバ",
    "メリープ",
    "メレシー",
    "モウカザル",
    "モクロー",
    "モグリュー",
    "モスノウ",
    "モノズ",
    "モルフォン",
    "モルペコ",
    "モロバレル",
    "ヤトウモリ",
    "ヤドキング",
    "ヤドラン",
    "ヤドン",
    "ヤミカラス",
    "ヤルキモノ",
    "ヤレユータン",
    "ヤングース",
    "ユキカブリ",
    "ユキノオー",
    "ユキハミ",
    "ユキメノコ",
    "ユキワラシ",
    "ユクシー",
    "ユニラン",
    "ヨクバリス",
    "ヨノワール",
    "ヨマワル",
    "ヨルノズク",
    "ヨーギラス",
    "ライコウ",
    "ライチュウ",
    "ラウドボーン",
    "ラッキー",
    "ラティアス",
    "ラティオス",
    "ラビフット",
    "ラフレシア",
    "ラブカス",
    "ラブトロス",
    "ラムパルド",
    "ラルトス",
    "ランクルス",
    "ランドロス",
    "リオル",
    "リザード",
    "リザードン",
    "リングマ",
    "リーシャン",
    "リーフィア",
    "ルカリオ",
    "ルクシオ",
    "レアコイル",
    "レジアイス",
    "レジギガス",
    "レジスチル",
    "レジドラゴ",
    "レジロック",
    "レントラー",
    "ロコン",
    "ロトム",
    "ローブシン",
    "ワカシャモ",
    "ワシボン",
    "ワタッコ",
    "ワッカネズミ",
    "ワナイダー",
    "ワニノコ",
  ];

  String.prototype.toKana = function () {
    return this.split("").map((char) => {
      return kanaMap[char] ?? char;
    });
  };
  Array.prototype.toUniqValues = function () {
    return Array.from(new Set(this));
  };

  function check(usedChars) {
    if (new Set(usedChars).size === usedChars.length)
      document.getElementById("used").value = "OK";
    else
      document.getElementById("used").value = usedChars
        .filter((x, i, self) => self.indexOf(x) !== self.lastIndexOf(x))
        .toSorted();
  }
  function updateOptions(usedChars) {
    const allowedNames = names.filter((name) =>
      usedChars.toUniqValues().every((c) => name.toKana().indexOf(c) < 0)
    );
    createOptions(allowedNames);
  }
  function createOptions(names) {
    const select = document.getElementById("remaining_pokemons");
    select.innerHTML = "";
    for (let name of names) {
      const option = document.createElement("option");
      option.value = name;
      option.innerHTML = name;
      select.appendChild(option);
    }
  }
  window.addEventListener("load", () => {
    const input = document.getElementById("text");
    const select = document.getElementById("remaining_pokemons");

    createOptions(names);

    function onInput() {
      const chars = input.value.replace(/[\sー]/g, "").toKana();
      check(chars);
      updateOptions(chars);
    }

    input.addEventListener("input", onInput);
    select.addEventListener("change", () => {
      const prevValue = input.value.trimEnd();
      input.value =
        prevValue.length !== 0 ? `${prevValue}\n${select.value}` : select.value;
      onInput();
    });
  });
</script>
<title>マルチ確認用</title>
<textarea rows="10" cols="20" id="text"></textarea>

<textarea rows="10" cols="20" id="used"></textarea>
<select size="30" id="remaining_pokemons"></select>
